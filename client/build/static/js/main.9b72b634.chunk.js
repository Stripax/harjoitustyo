(this.webpackJsonpharjoitustyo=this.webpackJsonpharjoitustyo||[]).push([[0],{144:function(e,t,a){},163:function(e,t,a){},265:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),i=a.n(c),s=a(11),r=a.n(s),o=(a(144),a(22)),u=a(7),d=a(18),l=a.n(d),j=a(26),b=a(328),h=a(23),x=a.n(h),O=(a(163),a(121)),m=a.n(O),f=(a(81),a(304)),p=a(319),g=a(329),v=a(314),k=a(324),y=a(6),w=a(65),C=a(83),S=a.n(C),q=a(325),E=a(330),N=a(313),I=a(309),F=a(310),_=a(308),W=function(e){var t=Object(c.useState)(!0),a=Object(u.a)(t,2),i=a[0],s=a[1],r=Object(c.useState)(""),o=Object(u.a)(r,2),d=o[0],l=o[1];return Object(n.jsx)("div",{children:Object(n.jsxs)(E.a,{open:i,onClose:function(){s(!1),e.dialogClosed()},"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(_.a,{id:"form-dialog-title",children:"Uuden tentin nimi"}),Object(n.jsxs)(I.a,{children:[Object(n.jsx)(F.a,{children:"Anna uuden tentin nimi ja valitse sitten OK"}),Object(n.jsx)(q.a,{autoFocus:!0,margin:"dense",id:"newExamNameTextField",label:"Tentin Nimi",type:"text",fullWidth:!0,onChange:function(e){return function(e){l(e)}(e.target.value)}})]}),Object(n.jsxs)(N.a,{children:[Object(n.jsx)(v.a,{onClick:function(){s(!1),e.dialogClosed()},color:"primary",children:"Peruuta"}),Object(n.jsx)(v.a,{onClick:function(){s(!1),e.dispatch(d),e.dialogClosed()},color:"primary",children:"OK"})]})]})})},A=(a(82),a(12)),T=a(315),L=function(e){var t=Object(c.useState)(e.open),a=Object(u.a)(t,2),i=a[0],s=a[1],r=Object(c.useState)(!1),d=Object(u.a)(r,2),b=d[0],h=d[1],O=Object(c.useState)({firstName:"",surname:"",email:"",password:"",passwordCheck:""}),m=Object(u.a)(O,2),f=m[0],p=m[1],g=null;g="https://exam-program.herokuapp.com/";var k=function(e){p(Object(o.a)(Object(o.a)({},f),{},Object(A.a)({},e.target.id,e.target.value)))},y=function(e){f.password==e||f.passwordCheck==e?h(!0):h(!1)},w=function(){var t=Object(j.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.post(g+"adduser",{firstName:f.firstName,surname:f.surname,email:f.email,password:f.password});case 3:200==(a=t.sent).status&&e.alertFeedback(a.data.message,a.data.severity),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.alertFeedback(t.t0.message,"error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)(E.a,{open:i,TransitionComponent:T.a,transitionDuration:{enter:700,exit:500},onExited:function(){e.closed(),s(!1)},onClose:function(){return s(!1)},"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(_.a,{id:"form-dialog-title",children:"Rekister\xf6idy"}),Object(n.jsxs)(I.a,{children:[Object(n.jsx)(F.a,{children:"Sy\xf6t\xe4 etu- ja sukunimi, s\xe4hk\xf6postiosoite sek\xe4 salasanasi"}),Object(n.jsx)(q.a,{autoFocus:!0,autoComplete:"off",margin:"dense",id:"firstName",label:"Etunimi",type:"text",variant:"outlined",fullWidth:"true",onChange:function(e){return k(e)}}),Object(n.jsx)(q.a,{autoComplete:"off",margin:"dense",id:"surname",label:"Sukunimi",type:"text",variant:"outlined",fullWidth:"true",onChange:function(e){return k(e)}}),Object(n.jsx)(q.a,{autoComplete:"off",required:!0,margin:"dense",id:"email",label:"S\xe4hk\xf6postiosoite",type:"text",variant:"outlined",fullWidth:"true",onChange:function(e){return k(e)}}),Object(n.jsx)(q.a,{autoComplete:"off",required:!0,margin:"dense",id:"password",label:"Salasana",type:"password",variant:"outlined",fullWidth:"true",onChange:function(e){k(e),y(e.target.value)}}),Object(n.jsx)(q.a,{autoComplete:"off",required:!0,error:!b||f.password.length<1,margin:"dense",id:"passwordCheck",label:"Anna salasanasi uudestaan",type:"password",variant:"outlined",fullWidth:"true",onChange:function(e){k(e),y(e.target.value)}})]}),Object(n.jsxs)(N.a,{children:[Object(n.jsx)(v.a,{onClick:function(){return s(!1)},color:"primary",children:"Peruuta"}),Object(n.jsx)(v.a,{onClick:function(){s(!1),w()},color:"primary",disabled:!b||f.password.length<1,children:"Rekister\xf6idy"})]})]})})},Q=function(e){var t=Object(c.useState)(e.open),a=Object(u.a)(t,2),i=a[0],s=a[1],r=Object(c.useState)({email:"",password:""}),d=Object(u.a)(r,2),b=d[0],h=d[1],O=null;O="https://exam-program.herokuapp.com/";var m=function(e){h(Object(o.a)(Object(o.a)({},b),{},Object(A.a)({},e.target.id,e.target.value)))},f=function(){var t=Object(j.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.post(O+"login/",{email:b.email,password:b.password});case 3:200==(a=t.sent).status&&(e.alertFeedback(a.data.message,a.data.severity),e.isLoginSuccessful(a.data.isLoginSuccessful),a.data.isLoginSuccessful&&e.userId(a.data.userId)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.alertFeedback(t.t0.message,"error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)(E.a,{open:i,TransitionComponent:T.a,transitionDuration:{enter:700,exit:500},onExited:function(){e.closed(),s(!1)},onClose:function(){return s(!1)},"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(_.a,{id:"form-dialog-title",children:"Sis\xe4\xe4nkirjautuminen"}),Object(n.jsxs)(I.a,{children:[Object(n.jsx)(F.a,{children:"Sy\xf6t\xe4 s\xe4hk\xf6postiosoitteesi sek\xe4 salasanasi"}),Object(n.jsx)(q.a,{autoFocus:!0,required:!0,autoComplete:"off",margin:"dense",id:"email",label:"S\xe4hk\xf6postiosoite",type:"text",fullWidth:!0,onChange:function(e){return m(e)}}),Object(n.jsx)(q.a,{required:!0,autoComplete:"off",margin:"dense",id:"password",label:"Salasana",type:"password",fullWidth:!0,onChange:function(e){return m(e)}})]}),Object(n.jsxs)(N.a,{children:[Object(n.jsx)(v.a,{onClick:function(){return s(!1)},color:"primary",children:"Peruuta"}),Object(n.jsx)(v.a,{onClick:function(){s(!1),f()},disabled:b.email.length<1||b.password.length<1,color:"primary",children:"Kirjaudu"})]})]})})},K=a(331),R=a(327),B=a(316),P=function(e){var t=Object(c.useState)(e.open),a=Object(u.a)(t,2),i=a[0],s=a[1];return Object(n.jsx)("div",{children:Object(n.jsx)(K.a,{open:i,autoHideDuration:6e3,anchorOrigin:{horizontal:"left",vertical:"bottom"},TransitionComponent:B.a,transitionDuration:{enter:800,exit:1200},TransitionProps:{direction:"up"},onExited:function(){e.closed(),s(!1)},onClose:function(){return s(!1)},children:Object(n.jsx)(R.a,{elevation:6,variant:"filled",closeText:"Sulje ikkuna",severity:e.alertFeedback.severity,onClose:function(){return s(!1)},children:e.alertFeedback.message})})})};var D=a(318),J=a(320),H=a(312),G=a(321),U=a(322),z=a(323),M=a(125),Y=a.n(M),$=new WebSocket("ws://localhost:8080"),V=Object(D.a)({table:{minWidth:650},chatSection:{width:"100%",height:"80vh"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},messageArea:{height:"65vh",overflowY:"auto"}}),X=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),a=t[0],i=t[1],s=V();return Object(n.jsx)("div",{children:Object(n.jsxs)(p.a,{container:!0,component:f.a,className:s.chatSection,children:[Object(n.jsxs)(p.a,{item:!0,xs:3,className:s.borderRight500,children:[Object(n.jsx)(J.a,{}),Object(n.jsx)(p.a,{item:!0,xs:12,style:{padding:"5px"},children:Object(n.jsx)(q.a,{id:"chatName",label:"Nimesi",variant:"outlined",fullWidth:!0})}),Object(n.jsx)(J.a,{}),Object(n.jsxs)(H.a,{children:[Object(n.jsx)(G.a,{children:Object(n.jsx)(U.a,{children:"Remy Sharp"})}),Object(n.jsx)(G.a,{children:Object(n.jsx)(U.a,{primary:"Alice",children:"Alice"})}),Object(n.jsx)(G.a,{children:Object(n.jsx)(U.a,{primary:"Cindy Baker",children:"Cindy Baker"})})]})]}),Object(n.jsxs)(p.a,{item:!0,xs:9,children:[Object(n.jsxs)(H.a,{className:s.messageArea,children:[Object(n.jsx)(G.a,{children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(U.a,{align:"right",primary:"Hey man, What's up?"})}),Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(U.a,{align:"right",secondary:"09:30"})})]})},"1"),Object(n.jsx)(G.a,{children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(U.a,{align:"left",primary:"Hey, Iam Good! What about you ?"})}),Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(U.a,{align:"left",secondary:"09:31"})})]})},"2"),Object(n.jsx)(G.a,{children:Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(U.a,{align:"right",primary:"Cool. i am good, let's catch up!"})}),Object(n.jsx)(p.a,{item:!0,xs:12,children:Object(n.jsx)(U.a,{align:"right",secondary:"10:30"})})]})},"3")]}),Object(n.jsx)(J.a,{}),Object(n.jsxs)(p.a,{container:!0,style:{padding:"20px"},children:[Object(n.jsx)(p.a,{item:!0,xs:11,children:Object(n.jsx)(q.a,{label:"Kirjoita viesti",fullWidth:!0,onChange:function(e){return function(e){i(e.target.value)}(e)},value:a,autoFocus:!0})}),Object(n.jsx)(p.a,{xs:1,align:"right",children:Object(n.jsx)(z.a,{color:"primary","aria-label":"add",onClick:function(){$.send(a),i("")},children:Object(n.jsx)(Y.a,{})})})]})]})]})})},Z=null;function ee(e,t){var a=JSON.parse(JSON.stringify(e)),n=a.findIndex((function(e){return e.id==t.activeExam}));switch(t.type){case"changeQuestion":return a[t.data.activeExam].questions[t.data.questionIndex].question=t.data.newQuestionText,a;case"changeAnswerText":return a[t.data.activeExam].questions[t.data.questionIndex].choices[t.data.answerIndex].answer=t.data.newAnswerText,a;case"changeCorrectAnswer":return a[t.data.activeExam].questions[t.data.questionIndex].choices[t.data.answerIndex].isCorrect=t.data.checked,a;case"deleteQuestion":return a[t.data.activeExam].questions.splice(t.data.questionIndex,1),a;case"deleteAnswer":return a[t.data.activeExam].questions[t.data.questionIndex].choices.splice(t.data.answerIndex,1),a;case"addExam":var c={id:null,exam_name:t.newExamName,exam_score:null,exam_startdate:null,exam_enddate:null,min_points:null,grade_limits:null};return function(){var e=Object(j.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post(Z+"exam",{exam_name:t.newExamName});case 3:a=e.sent,c.id=a.request.response,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()(),a.push(c),a;case"addQuestion":var i={id:Object(b.a)(),question:"",choices:[]};return a[t.data.activeExam].questions.push(i),a;case"addAnswer":var s={id:Object(b.a)(),answer:"",isSelected:!1,isCorrect:!1};return a[t.data.activeExam].questions[t.data.questionIndex].choices.push(s),a;case"checkBoxClicked":return function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.put(Z+"checkbox",{answer_id:t.data.answerId,checked:t.data.checked});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()(),a[n].questions[t.data.questionIndex].choices[t.data.answerIndex].is_selected=t.data.checked,a;case"getQuestions":var r=[];return t.data.forEach((function(e){r.push(e)})),a[n].questions=r,a;case"getQuestionChoices":var o=[];t.data.forEach((function(e){o.push(e)}));for(var u=0;u<a[n].questions.length;u++)a[n].questions[u].choices=o.filter((function(e){return e.question_id==a[n].questions[u].id}));return a;case"getExamNames":return t.data;default:throw new Error}}Z="https://exam-program.herokuapp.com/";var te=function(){var e=Object(c.useReducer)(ee,[]),t=Object(u.a)(e,2),a=t[0],i=t[1],s=Object(c.useState)(-1),r=Object(u.a)(s,2),d=r[0],h=r[1],O=Object(c.useState)(0),C=Object(u.a)(O,2),q=(C[0],C[1]),E=Object(c.useState)({message:"",severity:""}),N=Object(u.a)(E,2),I=N[0],F=N[1],_=Object(c.useState)(!1),A=Object(u.a)(_,2),T=A[0],K=A[1],R=Object(c.useState)(!1),B=Object(u.a)(R,2),D=B[0],J=B[1],H=Object(c.useState)(!1),G=Object(u.a)(H,2),U=G[0],z=G[1],M=Object(c.useState)(!1),Y=Object(u.a)(M,2),$=Y[0],V=Y[1],te=Object(c.useState)(!1),ae=Object(u.a)(te,2),ne=ae[0],ce=(ae[1],Object(c.useState)(!1)),ie=Object(u.a)(ce,2),se=ie[0],re=ie[1],oe=Object(c.useState)(!1),ue=Object(u.a)(oe,2),de=ue[0],le=ue[1],je=Object(c.useState)(!1),be=Object(u.a)(je,2),he=be[0],xe=be[1],Oe=Object(c.useState)(!1),me=Object(u.a)(Oe,2),fe=me[0],pe=me[1],ge=Object(c.useState)(!1),ve=Object(u.a)(ge,2),ke=ve[0],ye=ve[1],we=Object(c.useState)(!1),Ce=Object(u.a)(we,2),Se=(Ce[0],Ce[1],Object(c.useState)(!1)),qe=Object(u.a)(Se,2),Ee=qe[0],Ne=qe[1];new WebSocket("ws://localhost:8080"),Object(c.useEffect)((function(){(function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(Z+"exams");case 3:(t=e.sent).data.length>0&&(i({type:"getExamNames",data:t.data}),K(!0)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),F({message:e.t0.message,severity:"error"}),ye(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){d>=0&&(function(){var e=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(Z+"questions/"+d);case 3:return t=e.sent,e.next=6,x.a.get(Z+"answers/"+d);case 6:a=e.sent,t.data.length>0&&(i({type:"getQuestions",data:t.data,activeExam:d}),J(!0)),a.data.length>0&&(i({type:"getQuestionChoices",data:a.data,activeExam:d}),z(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()(),V(!1))}),[d]);var Ie=Object(y.a)({root:{color:w.a[400],"&$checked":{color:w.a[600]}},checked:{}})((function(e){return Object(n.jsx)(g.a,Object(o.a)({color:"default"},e))})),Fe=function(e,t){ye(!0),F({message:e,severity:t})},_e=new m.a({en:{chat:"Chat",info:"About",admin:"Admin",exams:"Show exams",signup:"Signup",signin:"Sign in",exit:"Exit"},fi:{chat:"Keskustelu",info:"Tietoa sovelluksesta",admin:"J\xe4rjestelm\xe4nvalvoja",exams:"N\xe4yt\xe4t tentit",signup:"Rekister\xf6idy",signin:"Kirjaudu",exit:"Poistu"}});return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsxs)("div",{className:"header-buttons",children:[Object(n.jsx)(v.a,{color:"inherit",onClick:function(){"fi"==_e.getLanguage()?(_e.setLanguage("en"),Fe("Language switched to English","info")):(_e.setLanguage("fi"),Fe("Kieli vaihdettu suomeksi","info"))},disabled:!0,children:"FI / EN"},Object(b.a)()),Object(n.jsx)(v.a,{color:"inherit",onClick:function(){return window.open("https://www.youtube.com/watch?v=sAqnNWUD79Q","_blank")},children:_e.info},Object(b.a)()),Object(n.jsx)(v.a,{color:"inherit",onClick:function(){return Ne(!Ee)},children:_e.chat},Object(b.a)()),!se&&Object(n.jsx)(v.a,{color:"inherit",disabled:!0,children:_e.admin},Object(b.a)()),se&&Object(n.jsx)(v.a,{color:"inherit",onClick:function(){return h(-1)},children:_e.exams},Object(b.a)()),!se&&Object(n.jsx)(v.a,{color:"inherit",onClick:function(){return xe(!0)},children:_e.signup},Object(b.a)()),!se&&Object(n.jsx)(v.a,{color:"inherit",onClick:function(){return pe(!0)},children:_e.signin},Object(b.a)()),se&&Object(n.jsx)(v.a,{color:"inherit",onClick:function(){return Fe("Kirjauduit ulos","info"),re(!1),void q(0)},children:_e.exit},Object(b.a)())]})}),Object(n.jsx)("div",{className:"chat-window",children:Ee&&Object(n.jsx)(X,{closed:function(){return Ne(!1)}},Object(b.a)())}),Object(n.jsxs)("div",{className:"login-register-dialogs",children:[Object(n.jsx)(L,{open:he,closed:function(){return xe(!1)},alertFeedback:function(e,t){ye(!0),F({message:e,severity:t})}},Object(b.a)()),Object(n.jsx)(Q,{open:fe,closed:function(){return pe(!1)},alertFeedback:function(e,t){ye(!0),F({message:e,severity:t})},isLoginSuccessful:function(e){return re(e)},userId:function(e){return q(e)}},Object(b.a)()),Object(n.jsx)(P,{open:ke,closed:function(){ye(!1),F({message:"",severity:""})},alertFeedback:{message:I.message,severity:I.severity}},Object(b.a)())]}),Object(n.jsxs)("div",{className:"exam-buttons",children:[se&&function(){if(T)return a.map((function(e){return Object(n.jsx)(v.a,{color:"primary",onClick:function(){h(Number(e.id)),J(!1),z(!1)},children:e.exam_name},Object(b.a)())}))}(),ne&&Object(n.jsx)(v.a,{color:"primary",startIcon:Object(n.jsx)(S.a,{}),onClick:function(){return le(!0)}},Object(b.a)()),de&&Object(n.jsx)(W,{dialogClosed:function(){return le(!1)},dispatch:function(e){return i({type:"addExam",newExamName:e})}},Object(b.a)())]}),Object(n.jsx)("div",{className:"main-body",children:Object(n.jsx)(p.a,{container:!0,direction:"column",justify:"center",alignItems:"stretch",children:Object(n.jsxs)(p.a,{item:!0,xs:12,children:[!ne&&D&&function(){var e=a.findIndex((function(e){return e.id==d}));if(D&&U&&d>=0)return a[e].questions.map((function(e,t){return Object(n.jsxs)(f.a,{className:"question",children:[Object(n.jsx)("h2",{className:"question-header",children:e.question_text}),e.choices.map((function(a,c){return Object(n.jsx)("div",{children:Object(n.jsx)(k.a,{control:Object(n.jsxs)("div",{children:[!1===$?Object(n.jsx)(g.a,{checked:a.is_selected,onClick:function(n){return i({type:"checkBoxClicked",data:{checked:n.target.checked,questionId:e.id,questionIndex:t,answerId:a.id,answerIndex:c},activeExam:d})}}):Object(n.jsx)(g.a,{color:"primary",checked:a.is_selected,disabled:!0}),$&&Object(n.jsx)(Ie,{checked:a.is_correct,disabled:!0})]}),label:a.answer_text})},a.id)}))]},e.id)}))}(),ne&&d>=0&&Object(n.jsx)(v.a,{startIcon:Object(n.jsx)(S.a,{}),onClick:function(){return i({type:"addQuestion",activeExam:d})}},Object(b.a)())]})})}),Object(n.jsx)("div",{className:"answer-buttons",children:d>=0&&!ne&&D&&Object(n.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){return V(!$)},children:"N\xe4yt\xe4 vastaukset"},Object(b.a)())})]})},ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,332)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),i(e),s(e)}))};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(te,{})}),document.getElementById("root")),ae()}},[[265,1,2]]]);
//# sourceMappingURL=main.9b72b634.chunk.js.map